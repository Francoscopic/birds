var submitHandle=0,coverSelected=0,validateHandle=0,submitButton=$("#write-submit");function writeTitle(){var t=$("#write-title"),e=$("#title-response"),n=$("#focusForTitle");function a(t,n){$(e).css("color",t).text(`${n}`)}function i(t,e){t.css("border-bottom-color",e)}$(t).keyup(function(){!function(t,e,r,o){t>100?(a("tomato",`${t-r} off`),i(n,"tomato"),submit_handle(0)):100==t?(a("#909090","Wedge"),i(n,"#e0e0e0"),submit_handle(1)):(a("#909090",r-t),i(n,"#e0e0e0"),submit_handle(1))}($(this).val().length,0,100)})}function writeIdea(){var t=$("#wrt-parags-edit"),e=$("#wrt-editor-err"),n=1,a=$("#focusForNotes");function i(t,n=""){e.html(`<span class="${n}">${t}</span>`)}function r(t,e){t.css("border-bottom-color",e)}$(t).on("keyup",function(){var t,e;n=$(this).val().split("\n").length,e=7,(t=n)>=1&&t<=e?(i(`${t} / ${e} paragraphs`),r(a,"#e0e0e0"),submit_handle(1)):t>e?(i(`${t} / ${e} paragraphs`,"note-er"),r(a,"tomato"),submit_handle(0)):(i("This situation is strange. Please refresh page","note-er"),submit_handle(0))})}function submit_handle(t=null){var e=$("#wrt-parags-edit").val(),n=$("#write-title").val();function a(t,a=null){e.length>t&&""!=n&&null==a?i(!1,1):i(!0,.5)}function i(t,e){submitButton.attr("disabled",t).css("opacity",`${e}`)}"1"==t?(validateHandle=1,submitHandle=1,a(1)):(validateHandle=0,submitHandle=0,a(1,0))}function preview_note(){const t=$("#write-submit"),e=$("#write-save-submit"),n=$("#write-title"),a=$("#wrt-parags-edit"),i=$("#focusForTitle"),r=$("#focusForNotes"),o=$("#wrt-cover-div"),s=$("#wrt-cover-del"),l=$(".write-title-textarea-error");var c,u,d=2;function f(t=null,...e){for(var n=0;n<e.length;n++)null!=t?e[n].attr({disabled:t}).css("background-color","transparent"):e[n].fadeToggle("slow")}(u=t).on("click",function(t){f(null,i,r,l,e,1==coverSelected?s:o),f(c=d%2==0,n,a),function(t,e){1==t?e.html('<span class="sm-i"><i class="sm-i fa fa-arrow-left"></i> EDIT</span>'):e.html('<span class="sm-i">PREVIEW <i class="sm-i fa fa-arrow-right"></i></span>')}(c,u),d++,t.preventDefault()})}function saveEditing(){var t=$("#write-save-submit");function e(e,n){$(t).attr("disabled",e).css("opacity",n)}function n(t){if(t.lengthComputable){var e=t.total,n=t.loaded,a=Math.round(100*n/e),i=$("#write-save-submit");i.text(`Uploading: ${a}%`),a>=100&&i.text("Finessing...")}}$(t).on("click",function(a){e(!0,".5");var i=function(t,e){var n=$("form").get(0),a=new FormData(n);return a.append("nt",t),a.append("ttl",e),a}($("#wrt-parags-edit").val(),$("#write-title").val());$.ajax({url:"../diamonds_pages/research.php",type:"POST",data:i,xhr:function(){var t=$.ajaxSettings.xhr();t.upload&&t.upload.addEventListener("progress",n,!1);return t},contentType:!1,cache:!1,processData:!1,success:function(n){!function(n){$(".wel").text(n),e(!1,"1"),t.text("SUBMIT")}(n)},error:function(n,a,i){(function(t,e="#505050"){const n=$("#change-notification"),a=$("#change-notification-p");n.css("background-color",e).slideDown(),$(a).html(`${t}`)})("Funny error, try again.","tomato"),e(!1,"1"),t.text("SUBMIT"),console.error(i)}}),a.preventDefault()})}$(document).ready(function(){writeTitle(),writeIdea(),preview_note(),saveEditing()});